// 这是用于静态导出（GitHub Pages）的 layout 示例
// 使用方法：将此文件重命名为 layout.tsx（或创建新文件并更新配置）
// 注意：这将使整个应用成为客户端渲染，可能影响性能

'use client'

import { useEffect, useState } from 'react'
import { getLocaleOnClient } from '@/i18n/client'
import type { Locale } from '@/i18n'
import { i18n } from '@/i18n'

import './styles/globals.css'
import './styles/markdown.scss'

const LocaleLayout = ({
  children,
}: {
  children: React.ReactNode
}) => {
  const [locale, setLocale] = useState<Locale>(i18n.defaultLocale)
  const [mounted, setMounted] = useState(false)

  useEffect(() => {
    setMounted(true)
    const clientLocale = getLocaleOnClient()
    setLocale(clientLocale)
  }, [])

  return (
    <html lang={mounted ? locale : i18n.defaultLocale} className="h-full">
      <body className="h-full bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50">
        <div className="overflow-x-auto min-h-screen flex items-center justify-center p-3 sm:p-4 md:p-6 lg:p-8">
          <div className="w-full max-w-[1400px] min-w-[320px]">
            {children}
          </div>
        </div>
      </body>
    </html>
  )
}

export default LocaleLayout

